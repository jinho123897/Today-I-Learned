# 콜백

> ❗브라우저 메서드를 사용합니다.   
콜백, 프라미스 등을 어떻게 사용하는지 보여드리기 위해 본 챕터에선 브라우저 전용 메서드를 사용할 예정입니다. 스크립트를 불러오고 완성된 문서에 간단한 조작을 하는 예시에서 특히 브라우저 메서드가 사용될 예정입니다.   
   
자바스크립트 호스트 환경이 제공하는 여러 함수를 사용하면 비동기(asynchronous) 동작을 스케줄링 할 수 있습니다. 원하는 때에 동작이 시작하도록 할 수 있죠.   
   
`setTimeout`은 스케줄링에 사용되는 가장 대표적인 함수입니다.   
   
실무에서 맞닥뜨리는 비동기 동작은 아주 다양합니다. 스크립트나 모듈을 로딩하는 것 또한 비동기 동작입니다.   
   
`src`에 있는 스크립트를 읽어오는 함수 `loadScript(src)`를 예시로 비동기 동작 처리가 어떻게 일어나는지 살펴봅시다.   

```
function loadScript(src) {
  // <script> 태그를 만들고 페이지에 태그를 추가합니다.
  // 태그가 페이지에 추가되면 src에 있는 스크립트를 로딩하고 실행합니다.
  let script = document.createElement('script');
  script.src = src;
  document.head.append(script);
}
```

함수 `loadScript(src)`는 `<script src="...">`를 동적으로 만들고 이를 문서에 추가합니다. 브라우저는 자동으로 태그에 있는 스크립트를 불러오고, 로딩이 완료되면 스크립트를 실행합니다.   
   
그런데 이 때 스크립트는 '비동기적으로' 실행됩니다. 로딩은 지금 당장 시작되더라도 실행을 함수가 끝난 후에야 되기 때문입니다.   
   
따라서 `loadScript(...)` 아래에 있는 코드들은 스크립트 로딩이 종료되는 걸 기다리지 않습니다.   

```
loadScript('/my/script.js');
// loadScript 아래의 코드는 
// 스크립트 로딩이 끝날 때까지 기다리지 않습니다.
// ...
```

스크립트 로딩이 끝나자마자 이 스크립트를 사용해 무언가를 해야만 한다고 가정해 봅시다. 스크립트 안에 다양한 함수가 정의되어 있고, 우리는 이 함수를 실행하길 원하는 상황입니다.   
   
그런데 `loadScript(...)`를 호출하자마자 내부 함수를 호출하면 원하는 대로 작동하지 않습니다.
